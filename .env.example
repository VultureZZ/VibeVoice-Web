# AudioMesh API Configuration

# API Key (optional - if not set, any API key is accepted)
# If set, all requests must provide this API key via X-API-Key header or api_key query parameter
API_KEY=

# Rate limiting
# Number of requests allowed per minute per API key
RATE_LIMIT_PER_MINUTE=100

# TTS (Qwen3): unload models after this many seconds of no requests (0 = never unload)
TTS_MODEL_IDLE_UNLOAD_SECONDS=15

# Paths (relative to project root)
MODEL_PATH=models/VibeVoice-1.5B
CUSTOM_VOICES_DIR=custom_voices
OUTPUT_DIR=outputs
VIBEVOICE_REPO_DIR=VibeVoice

# Server configuration
PORT=8000
HOST=0.0.0.0

# ACE-Step music generation (subprocess-managed)
ACESTEP_REPO_DIR=ACE-Step-1.5
ACESTEP_HOST=127.0.0.1
ACESTEP_PORT=8001
ACESTEP_DEVICE=cuda
ACESTEP_CONFIG_PATH=acestep-v15-turbo
ACESTEP_LM_MODEL_PATH=acestep-5Hz-lm-0.6B
ACESTEP_LM_BACKEND=pt
ACESTEP_STARTUP_TIMEOUT_SECONDS=120
ACESTEP_IDLE_SHUTDOWN_SECONDS=120
# Optional override command for launching ACE-Step API server
# ACESTEP_SERVER_COMMAND=uv run acestep-api --host 127.0.0.1 --port 8001
MUSIC_OUTPUT_DIR=outputs/music
MUSIC_REFERENCE_DIR=outputs/music/reference

# Transcript service
TRANSCRIPTS_DIR=transcripts
TRANSCRIPT_WHISPER_MODEL=large-v3
TRANSCRIPT_MAX_UPLOAD_MB=500
TRANSCRIPT_SUPPORTED_FORMATS=mp3,wav,m4a,mp4,webm,ogg,flac
TRANSCRIPT_SPEAKER_MATCH_THRESHOLD=0.75
TRANSCRIPT_MAX_CONCURRENT_JOBS=2
TRANSCRIPT_RETENTION_HOURS=72
TRANSCRIPT_EXTRACT_SPEAKER_AUDIO=true
TRANSCRIPT_MIN_SEGMENT_DURATION_SECONDS=3.0

# HuggingFace token for PyAnnote diarization models
HF_TOKEN=

# LLM provider for transcript analysis
LLM_PROVIDER=anthropic
LLM_MODEL=claude-opus-4-6
ANTHROPIC_API_KEY=
OPENAI_API_KEY=

# Transcript processing runtime split
# inprocess = run transcript pipeline inside API process
# subprocess = run transcript pipeline in separate worker environment (recommended)
TRANSCRIPT_PROCESSOR_MODE=subprocess
# Example: /home/cpearce/Programs/AudioMesh/.venv-transcripts/bin/python
TRANSCRIPT_WORKER_PYTHON=.venv-transcripts/bin/python
